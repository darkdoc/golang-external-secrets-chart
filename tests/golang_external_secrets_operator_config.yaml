suite: Test golang-external-secrets operatorconfig with default values
templates:
  - templates/golang-external-secrets-operator-config.yaml
release:
  name: release-test
tests:
  - it: should output default values for the OperatorConfig
    asserts:
      - containsDocument:
          kind: OperatorConfig
          apiVersion: v1
          name: golang-external-secrets
      - equal:
          path: metadata.annotations["argocd.argoproj.io/sync-wave"]
          value: "-10"

  - it: should set the images to the default values for the OperatorConfig
    asserts:
      - containsDocument:
          kind: OperatorConfig
          apiVersion: v1
          name: golang-external-secrets
      - equal:
          path: spec.image.tag
          value: v0.10.4-ubi
      - equal:
          path: spec.webhook.image.tag
          value: v0.10.4-ubi
      - equal:
          path: spec.certController.image.tag
          value: v0.10.4-ubi
